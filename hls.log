2020-08-02 07:18:13.007679 [ThreadId 5] - 




haskell-lsp:Starting up server ...
2020-08-02 07:18:13.0087094 [ThreadId 5] - ---> {"jsonrpc":"2.0","id":0,"method":"initialize","params":{"processId":7581,"rootPath":"/home/shlomo/code/parcopy","rootUri":"file:///home/shlomo/code/parcopy","capabilities":{"workspace":{"applyEdit":true,"workspaceEdit":{"documentChanges":true,"resourceOperations":["create","rename","delete"],"failureHandling":"textOnlyTransactional"},"didChangeConfiguration":{"dynamicRegistration":true},"didChangeWatchedFiles":{"dynamicRegistration":true},"symbol":{"dynamicRegistration":true,"symbolKind":{"valueSet":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26]},"tagSupport":{"valueSet":[1]}},"executeCommand":{"dynamicRegistration":true},"configuration":true,"workspaceFolders":true},"textDocument":{"publishDiagnostics":{"relatedInformation":true,"versionSupport":false,"tagSupport":{"valueSet":[1,2]}},"synchronization":{"dynamicRegistration":true,"willSave":true,"willSaveWaitUntil":true,"didSave":true},"completion":{"dynamicRegistration":true,"contextSupport":true,"completionItem":{"snippetSupport":true,"commitCharactersSupport":true,"documentationFormat":["markdown","plaintext"],"deprecatedSupport":true,"preselectSupport":true},"completionItemKind":{"valueSet":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25]}},"hover":{"dynamicRegistration":true,"contentFormat":["markdown","plaintext"]},"signatureHelp":{"dynamicRegistration":true,"signatureInformation":{"documentationFormat":["markdown","plaintext"],"parameterInformation":{"labelOffsetSupport":true}}},"definition":{"dynamicRegistration":true},"references":{"dynamicRegistration":true},"documentHighlight":{"dynamicRegistration":true},"documentSymbol":{"dynamicRegistration":true,"symbolKind":{"valueSet":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26]},"hierarchicalDocumentSymbolSupport":true,"tagSupport":{"valueSet":[1]}},"codeAction":{"dynamicRegistration":true,"isPreferredSupport":true,"codeActionLiteralSupport":{"codeActionKind":{"valueSet":["","quickfix","refactor","refactor.extract","refactor.inline","refactor.rewrite","source","source.organizeImports"]}}},"codeLens":{"dynamicRegistration":true},"formatting":{"dynamicRegistration":true},"rangeFormatting":{"dynamicRegistration":true},"onTypeFormatting":{"dynamicRegistration":true},"rename":{"dynamicRegistration":true,"prepareSupport":true},"documentLink":{"dynamicRegistration":true,"tooltipSupport":true},"typeDefinition":{"dynamicRegistration":true},"implementation":{"dynamicRegistration":true},"declaration":{"dynamicRegistration":true},"colorProvider":{"dynamicRegistration":true},"foldingRange":{"dynamicRegistration":true,"rangeLimit":5000,"lineFoldingOnly":true},"selectionRange":{"dynamicRegistration":true}},"window":{"workDoneProgress":true}},"initializationOptions":{"haskell":{}},"trace":"off","workspaceFolders":[{"uri":"file:///home/shlomo/code/parcopy","name":"parcopy"}],"clientInfo":{"name":"coc.nvim","version":"0.0.78"},"workDoneToken":"b9b067c7-0694-44e8-a0ba-cd0e3d639268"}}
2020-08-02 07:18:13.0109332 [ThreadId 5] - haskell-lsp:initializeRequestHandler: setting current dir to project root:/home/shlomo/code/parcopy
2020-08-02 07:18:13.0520654 [ThreadId 7] - <--2--{"result":{"capabilities":{"typeDefinitionProvider":true,"foldingRangeProvider":false,"textDocumentSync":{"openClose":true,"change":2,"save":{}},"workspace":{"workspaceFolders":{"supported":true,"changeNotifications":true}},"implementationProvider":true,"documentRangeFormattingProvider":true,"documentHighlightProvider":true,"executeCommandProvider":{"commands":["7612:eval:evalCommand","7612:ghcide:typesignature.add","7612:pragmas:addPragma"]},"renameProvider":true,"colorProvider":false,"definitionProvider":true,"hoverProvider":true,"codeActionProvider":true,"completionProvider":{"triggerCharacters":["."],"resolveProvider":false},"codeLensProvider":{},"documentSymbolProvider":true,"documentFormattingProvider":true}},"jsonrpc":"2.0","id":0}
2020-08-02 07:18:13.0550495 [ThreadId 5] - ---> {"jsonrpc":"2.0","method":"initialized","params":{}}
2020-08-02 07:18:13.0562077 [ThreadId 5] - ---> {"jsonrpc":"2.0","method":"textDocument/didOpen","params":{"textDocument":{"uri":"file:///home/shlomo/code/parcopy/app/ParRm.hs","languageId":"haskell","version":1,"text":"{-# LANGUAGE FlexibleContexts #-}\n{-# LANGUAGE LambdaCase #-}\n{-# LANGUAGE TupleSections #-}\n\nmodule ParRm where\n\nimport           Control.Lens        ((<%~), _init, at, forMOf_, non, view)\nimport           Control.Monad       (when)\nimport qualified Data.Map.Strict     as Map\nimport           Data.Sequence       (Seq(..))\nimport qualified Data.Sequence       as Seq\nimport           Data.Tuple          (swap)\nimport           Lib\nimport           Options.Applicative\nimport           System.FilePath     ((</>))\nimport           UnliftIO.Directory  (listDirectory)\nimport           UnliftIO.IORef      (newIORef, atomicModifyIORef')\n\nparRm :: FilePath -> Work ()\nparRm target = do\n    entryCountsRef <- newIORef Map.empty\n\n    multi [Seq.empty] $ \\pathPcs mount -> do\n        let toPath pcs = mount </> target </> foldr (</>) \"\" pcs\n            path = toPath pathPcs\n\n            -- Delete an item along with any newly empty dirs up the tree.\n            go exe pcs = do\n                run Verbose exe [\"-v\", toPath pcs]\n\n                forMOf_ _init pcs $ \\parentPcs -> do\n                    -- Decrement parent, removing it if it's zero, and report\n                    -- the new count.\n                    newCount <- atomicModifyIORef' entryCountsRef $\n                        swap . (at parentPcs . non 0 <%~ subtract 1)\n\n                    when (newCount == 0) $ go \"rmdir\" parentPcs\n\n        tryFileTypes [\n            listDirectory path >>= \\case\n                -- Empty dir.\n                [] -> do\n                    go \"rmdir\" pathPcs\n                    return []\n\n                -- Dir with entries.  Keep track of how many it has so it can be\n                -- known when to delete it, and add them to the work store.\n                entries -> do\n                    atomicModifyIORef' entryCountsRef $\n                        (, ()) . Map.insert pathPcs (length entries)\n                    return $ map (pathPcs :|>) entries,\n\n            do\n                -- File.  Delete it.\n                go \"rm\" pathPcs\n                return []]\n\nmain :: IO ()\nmain = mkUtil \"Recursive delete in parallel\" $ parRm <$> target\n\n    where\n\n    target = strArgument $ mconcat [\n        metavar \"TARGET\",\n        help \"Directory to remove\"]\n"}}}
2020-08-02 07:18:13.057176 [ThreadId 27] - Set files of interest to: [NormalizedFilePath "/home/shlomo/code/parcopy/app/ParRm.hs"]
2020-08-02 07:18:13.0574339 [ThreadId 27] - Restarting build session (aborting the previous one took 0.00s)
2020-08-02 07:18:13.0575217 [ThreadId 24] - Finishing build session(exception: AsyncCancelled)
2020-08-02 07:18:13.0575156 [ThreadId 27] - Opened text document: file:///home/shlomo/code/parcopy/app/ParRm.hs
2020-08-02 07:18:13.0602528 [ThreadId 75] - Consulting the cradle for "/home/shlomo/code/parcopy/app/ParRm.hs"
2020-08-02 07:18:13.0606966 [ThreadId 7] - <--2--{"jsonrpc":"2.0","params":{"token":0},"method":"window/workDoneProgress/create","id":0}
2020-08-02 07:18:13.0608085 [ThreadId 7] - <--2--{"jsonrpc":"2.0","params":{"value":{"kind":"begin","cancellable":false,"title":"Setting up project parcopy"},"token":0},"method":"$/progress"}
2020-08-02 07:18:13.0626924 [ThreadId 5] - ---> {"jsonrpc":"2.0","id":0,"result":null}
2020-08-02 07:18:13.0633974 [ThreadId 5] - haskell-lsp:Got reply message:"{\"jsonrpc\":\"2.0\",\"id\":0,\"result\":null}"
2020-08-02 07:18:13.1593168 [ThreadId 7] - <--2--{"jsonrpc":"2.0","params":{"token":"7"},"method":"window/workDoneProgress/create","id":1}
2020-08-02 07:18:13.1594792 [ThreadId 7] - <--2--{"jsonrpc":"2.0","params":{"value":{"kind":"begin","title":"Processing"},"token":"7"},"method":"$/progress"}
2020-08-02 07:18:13.1602222 [ThreadId 5] - ---> {"jsonrpc":"2.0","id":1,"result":null}
2020-08-02 07:18:13.1603386 [ThreadId 5] - haskell-lsp:Got reply message:"{\"jsonrpc\":\"2.0\",\"id\":1,\"result\":null}"
2020-08-02 07:18:13.259799 [ThreadId 7] - <--2--{"jsonrpc":"2.0","params":{"value":{"kind":"report","message":"1/2"},"token":"7"},"method":"$/progress"}
2020-08-02 07:18:18.6100086 [ThreadId 7] - <--2--{"jsonrpc":"2.0","params":{"value":{"kind":"end"},"token":0},"method":"$/progress"}
2020-08-02 07:18:18.6097209 [ThreadId 75] - Session loading result: Right (ComponentOptions {componentOptions = ["-i","-odir=/home/shlomo/code/parcopy/.stack-work/odir","-hidir=/home/shlomo/code/parcopy/.stack-work/odir","-hide-all-packages","-i/home/shlomo/code/parcopy/.stack-work/dist/x86_64-linux-tinfo6/Cabal-3.0.1.0/build/parcp","-i/home/shlomo/code/parcopy/app","-i/home/shlomo/code/parcopy/.stack-work/dist/x86_64-linux-tinfo6/Cabal-3.0.1.0/build/parcp/autogen","-i/home/shlomo/code/parcopy/.stack-work/dist/x86_64-linux-tinfo6/Cabal-3.0.1.0/build/global-autogen","-i/home/shlomo/code/parcopy/.stack-work/dist/x86_64-linux-tinfo6/Cabal-3.0.1.0/build/parcp/parcp-tmp","-stubdir=/home/shlomo/code/parcopy/.stack-work/dist/x86_64-linux-tinfo6/Cabal-3.0.1.0/build","-package-id=base-4.13.0.0","-package-id=containers-0.6.2.1","-package-id=directory-1.3.6.0","-package-id=filepath-1.4.2.1","-package-id=lens-4.18.1-44tD1ZSGzOC7tE3w8F9M7F","-package-id=mtl-2.2.2","-package-id=optparse-applicative-0.15.1.0-8lufb1qPLmfiWdRsJZ50S","-package=parcopy-0.1.1.0","-package-id=resourcet-1.2.4.2-Fqb6af58PO92XZgTK5owO9","-package-id=unix-2.7.2.2","-package-id=unliftio-0.2.13-IxZXn7t321N9I78if7Fva7","-package-id=unliftio-core-0.1.2.0-BfjjiCuGdFfJICKMeUQye4","-rtsopts","-with-rtsopts=-N","-main-is","ParCp","-optP-include","-optP/home/shlomo/code/parcopy/.stack-work/ghci/779206b9/cabal_macros.h","-ghci-script=/tmp/haskell-stack-ghci/5bb90eb4/ghci-script","-package-db","/home/shlomo/code/parcopy/.stack-work/install/x86_64-linux-tinfo6/9413eb24d3375d5c973ba31f9b99ac4761386206a742b60a1a6ea1033bf38505/8.8.3/pkgdb","-package-db","/home/shlomo/.stack/snapshots/x86_64-linux-tinfo6/9413eb24d3375d5c973ba31f9b99ac4761386206a742b60a1a6ea1033bf38505/8.8.3/pkgdb","-package-db","/home/shlomo/.stack/programs/x86_64-linux/ghc-tinfo6-8.8.3/lib/ghc-8.8.3/package.conf.d"], componentRoot = "/home/shlomo/code/parcopy", componentDependencies = ["parcopy.cabal","package.yaml","stack.yaml"]},"/home/shlomo/.stack/programs/x86_64-linux/ghc-tinfo6-8.8.3/lib/ghc-8.8.3")
2020-08-02 07:18:18.6957049 [ThreadId 7] - <--2--{"jsonrpc":"2.0","params":{"uri":"file:///home/shlomo/code/parcopy/app/ParRm.hs","diagnostics":[{"severity":1,"range":{"start":{"line":0,"character":0},"end":{"line":1,"character":0}},"source":"cradle","message":"ghcide compiled by GHC 8.8 failed to load packages: <command line>: cannot satisfy -package parcopy-0.1.1.0\n    (use -v for more information). \nPlease ensure that ghcide is compiled with the same GHC installation as the project."}]},"method":"textDocument/publishDiagnostics"}
2020-08-02 07:18:18.6961443 [ThreadId 7] - <--2--{"jsonrpc":"2.0","params":{"value":{"kind":"end"},"token":"7"},"method":"$/progress"}
2020-08-02 07:18:20.9281223 [ThreadId 5] - ---> {"jsonrpc":"2.0","method":"textDocument/didClose","params":{"textDocument":{"uri":"file:///home/shlomo/code/parcopy/app/ParRm.hs"}}}
2020-08-02 07:18:20.9283305 [ThreadId 5] - Closed: Uri {getUri = "file:///home/shlomo/code/parcopy/app/ParRm.hs"}
2020-08-02 07:18:20.9286194 [ThreadId 27] - Set files of interest to: []
2020-08-02 07:18:20.9287518 [ThreadId 27] - Closed text document: file:///home/shlomo/code/parcopy/app/ParRm.hs
